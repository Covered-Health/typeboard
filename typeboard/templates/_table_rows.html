{% if items %}
{% for item in items %}
<tr class="fade-in"
    {% if resource.get_fn %}
    style="cursor:pointer;"
    onclick="window.location='{{ base_path }}/{{ resource.id }}/{{ item_id(item, resource.id_param_name) }}'"
    {% endif %}>
    {% for col in columns %}
    {% if col.column and not col.hidden %}
    <td>{{ item_value(item, col.name) }}</td>
    {% endif %}
    {% endfor %}
    {% if resource.delete_fn %}
    <td class="text-end" onclick="event.stopPropagation()">
        <button class="btn btn-outline-danger btn-sm"
                hx-delete="{{ base_path }}/{{ resource.id }}/{{ item_id(item, resource.id_param_name) }}"
                hx-confirm="Are you sure you want to delete this record?"
                hx-target="closest tr"
                hx-swap="outerHTML">
            <i class="fa-solid fa-trash me-1"></i>
            Delete
        </button>
    </td>
    {% endif %}
</tr>
{% endfor %}
{% else %}
<tr><td colspan="100" class="text-center text-body-secondary p-5">No records found.</td></tr>
{% endif %}

{% if page_info and page_info.total_pages > 1 %}
<tr>
    <td colspan="100">
        <div class="d-flex justify-content-between align-items-center pt-3">
            <div>
                {% if page_info.has_prev %}
                <button class="btn btn-outline-secondary btn-sm"
                   hx-get="{{ base_path }}/{{ resource.id }}/rows?page={{ page_info.page - 1 }}"
                   hx-target="#table-body"
                   hx-swap="innerHTML">
                    <i class="fa-solid fa-chevron-left me-1"></i>
                    Previous
                </button>
                {% endif %}
            </div>
            <span class="text-body-secondary small">Page {{ page_info.page }} of {{ page_info.total_pages }} &middot; {{ page_info.total }} records</span>
            <div>
                {% if page_info.has_next %}
                <button class="btn btn-outline-secondary btn-sm"
                   hx-get="{{ base_path }}/{{ resource.id }}/rows?page={{ page_info.page + 1 }}"
                   hx-target="#table-body"
                   hx-swap="innerHTML">
                    Next
                    <i class="fa-solid fa-chevron-right ms-1"></i>
                </button>
                {% endif %}
            </div>
        </div>
    </td>
</tr>
{% endif %}
