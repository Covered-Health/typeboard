{% if items %}
{% for item in items %}
<tr class="fade-in"
    {% if resource.get_fn %}
    style="cursor:pointer;"
    onclick="window.location='{{ base_path }}/{{ resource.name }}/{{ item_id(item) }}'"
    {% endif %}>
    {% for col in columns %}
    {% if col.column and not col.hidden %}
    <td>{{ item_value(item, col.name) }}</td>
    {% endif %}
    {% endfor %}
    {% if resource.delete_fn %}
    <td style="text-align:right;" onclick="event.stopPropagation()">
        <wa-button size="small" variant="danger" appearance="outlined"
                hx-delete="{{ base_path }}/{{ resource.name }}/{{ item_id(item) }}"
                hx-confirm="Are you sure you want to delete this record?"
                hx-target="closest tr"
                hx-swap="outerHTML">
            <wa-icon slot="start" name="trash"></wa-icon>
            Delete
        </wa-button>
    </td>
    {% endif %}
</tr>
{% endfor %}
{% else %}
<tr><td colspan="100" class="empty-state">No records found.</td></tr>
{% endif %}

{% if page_info and page_info.total_pages > 1 %}
<tr>
    <td colspan="100">
        <div class="pagination">
            <div>
                {% if page_info.has_prev %}
                <wa-button size="small" appearance="outlined"
                   hx-get="{{ base_path }}/{{ resource.name }}/rows?page={{ page_info.page - 1 }}"
                   hx-target="#table-body"
                   hx-swap="innerHTML">
                    <wa-icon slot="start" name="chevron-left"></wa-icon>
                    Previous
                </wa-button>
                {% endif %}
            </div>
            <span>Page {{ page_info.page }} of {{ page_info.total_pages }} &middot; {{ page_info.total }} records</span>
            <div>
                {% if page_info.has_next %}
                <wa-button size="small" appearance="outlined"
                   hx-get="{{ base_path }}/{{ resource.name }}/rows?page={{ page_info.page + 1 }}"
                   hx-target="#table-body"
                   hx-swap="innerHTML">
                    Next
                    <wa-icon slot="end" name="chevron-right"></wa-icon>
                </wa-button>
                {% endif %}
            </div>
        </div>
    </td>
</tr>
{% endif %}
