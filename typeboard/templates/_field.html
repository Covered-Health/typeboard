<div class="form-field">
    {% if field.widget == "textarea" %}
    <wa-textarea label="{{ field.label }}{% if field.required %} *{% endif %}"
                 name="{{ field.name }}"
                 {% if field.read_only %}disabled{% endif %}
                 {% if field.required %}required{% endif %}
                 placeholder="Enter {{ field.label | lower }}..."
                 rows="4" resize="vertical">{{ values.get(field.name, field.default or '') }}</wa-textarea>
    {% elif field.widget == "checkbox" %}
    <wa-switch name="{{ field.name }}"
               {% if values.get(field.name, field.default) %}checked{% endif %}
               {% if field.read_only %}disabled{% endif %}>{{ field.label }}</wa-switch>
    {% elif field.widget == "number" %}
    <wa-input type="number" label="{{ field.label }}{% if field.required %} *{% endif %}"
              name="{{ field.name }}" value="{{ values.get(field.name, field.default or '') }}"
              {% if field.read_only %}disabled{% endif %} {% if field.required %}required{% endif %}
              placeholder="0"></wa-input>
    {% elif field.widget == "date" %}
    <wa-input type="date" label="{{ field.label }}{% if field.required %} *{% endif %}"
              name="{{ field.name }}" value="{{ values.get(field.name, field.default or '') }}"
              {% if field.read_only %}disabled{% endif %} {% if field.required %}required{% endif %}></wa-input>
    {% elif field.widget == "datetime" %}
    <wa-input type="datetime-local" label="{{ field.label }}{% if field.required %} *{% endif %}"
              name="{{ field.name }}" value="{{ values.get(field.name, field.default or '') }}"
              {% if field.read_only %}disabled{% endif %} {% if field.required %}required{% endif %}></wa-input>
    {% elif field.widget == "multiselect" %}
    {% set current = values.get(field.name, []) | map('string') | list %}
    <wa-select label="{{ field.label }}{% if field.required %} *{% endif %}"
               name="{{ field.name }}" multiple with-clear
               {% if field.read_only %}disabled{% endif %}
               max-options-visible="5"
               placeholder="Select {{ field.label | lower }}...">
        {% if field.enum_choices %}
        {% for value, label in field.enum_choices %}
        <wa-option value="{{ value }}" {% if value|string in current %}selected{% endif %}>{{ label }}</wa-option>
        {% endfor %}
        {% endif %}
    </wa-select>
    {% elif field.widget == "select" %}
    <wa-select label="{{ field.label }}{% if field.required %} *{% endif %}"
               name="{{ field.name }}"
               {% if field.read_only %}disabled{% endif %} {% if field.required %}required{% endif %}
               placeholder="Select...">
        {% if not field.required %}<wa-option value="">Select...</wa-option>{% endif %}
        {% if field.enum_choices %}
        {% for value, label in field.enum_choices %}
        <wa-option value="{{ value }}" {% if values.get(field.name) == value %}selected{% endif %}>{{ label }}</wa-option>
        {% endfor %}
        {% endif %}
    </wa-select>
    {% else %}
    <wa-input type="text" label="{{ field.label }}{% if field.required %} *{% endif %}"
              name="{{ field.name }}" value="{{ values.get(field.name, field.default or '') }}"
              {% if field.read_only %}disabled{% endif %} {% if field.required %}required{% endif %}
              placeholder="Enter {{ field.label | lower }}..."></wa-input>
    {% endif %}
</div>
